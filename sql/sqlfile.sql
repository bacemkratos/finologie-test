--
-- PostgreSQL database dump
--

-- Dumped from database version 16.3 (Debian 16.3-1.pgdg120+1)
-- Dumped by pg_dump version 16.3 (Debian 16.3-1.pgdg120+1)

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- Name: app_user; Type: TABLE; Schema: public; Owner: dbuser
--

CREATE TABLE public.app_user (
    id bigint NOT NULL,
    address character varying(255) NOT NULL,
    creation_date timestamp(6) without time zone,
    non_expired boolean,
    non_locked boolean,
    enabled boolean,
    password character varying(255) NOT NULL,
    update_date timestamp(6) without time zone,
    user_name character varying(255) NOT NULL,
    f_action_count integer
);


ALTER TABLE public.app_user OWNER TO dbuser;

--
-- Name: app_user_id_seq; Type: SEQUENCE; Schema: public; Owner: dbuser
--

ALTER TABLE public.app_user ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.app_user_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: balance; Type: TABLE; Schema: public; Owner: dbuser
--

CREATE TABLE public.balance (
    id bigint NOT NULL,
    amount double precision,
    currency character varying(255),
    date timestamp(6) without time zone,
    type character varying(255),
    update_date timestamp(6) without time zone,
    bank_account_id bigint,
    CONSTRAINT balance_currency_check CHECK (((currency)::text = ANY ((ARRAY['EUR'::character varying, 'USD'::character varying])::text[]))),
    CONSTRAINT balance_type_check CHECK (((type)::text = ANY ((ARRAY['AVAILABLE'::character varying, 'END_OF_DAY'::character varying])::text[])))
);


ALTER TABLE public.balance OWNER TO dbuser;

--
-- Name: balance_id_seq; Type: SEQUENCE; Schema: public; Owner: dbuser
--

ALTER TABLE public.balance ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.balance_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: bank_account; Type: TABLE; Schema: public; Owner: dbuser
--

CREATE TABLE public.bank_account (
    id bigint NOT NULL,
    account_name character varying(255),
    balance_amount double precision,
    creation_date timestamp(6) without time zone,
    currency character varying(255),
    iban_number character varying(34),
    status character varying(255),
    update_date timestamp(6) without time zone,
    CONSTRAINT bank_account_currency_check CHECK (((currency)::text = ANY ((ARRAY['EUR'::character varying, 'USD'::character varying])::text[]))),
    CONSTRAINT bank_account_status_check CHECK (((status)::text = ANY ((ARRAY['ACTIVE'::character varying, 'INACTIVE'::character varying, 'SUSPENDED'::character varying, 'CLOSED'::character varying, 'PENDING'::character varying, 'OVERDRAWN'::character varying, 'FROZEN'::character varying, 'BLOCKED'::character varying, 'DORMANT'::character varying, 'RESTRICTED'::character varying])::text[])))
);


ALTER TABLE public.bank_account OWNER TO dbuser;

--
-- Name: bank_account_id_seq; Type: SEQUENCE; Schema: public; Owner: dbuser
--

ALTER TABLE public.bank_account ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.bank_account_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: forbidden_account; Type: TABLE; Schema: public; Owner: dbuser
--

CREATE TABLE public.forbidden_account (
    iban character varying(34) NOT NULL
);


ALTER TABLE public.forbidden_account OWNER TO dbuser;

--
-- Name: payment; Type: TABLE; Schema: public; Owner: dbuser
--

CREATE TABLE public.payment (
    id bigint NOT NULL,
    amount double precision,
    beneficiary_account_number character varying(34),
    beneficiary_name character varying(255),
    communication character varying(255),
    creation_date timestamp(6) without time zone,
    currency character varying(255),
    excution_status boolean NOT NULL,
    update_date timestamp(6) without time zone,
    bank_account_id bigint,
    CONSTRAINT payment_currency_check CHECK (((currency)::text = ANY ((ARRAY['EUR'::character varying, 'USD'::character varying])::text[])))
);


ALTER TABLE public.payment OWNER TO dbuser;

--
-- Name: payment_id_seq; Type: SEQUENCE; Schema: public; Owner: dbuser
--

ALTER TABLE public.payment ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.payment_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: role; Type: TABLE; Schema: public; Owner: dbuser
--

CREATE TABLE public.role (
    id bigint NOT NULL,
    alias character varying(20),
    creation_date timestamp(6) without time zone,
    description character varying(255),
    update_date timestamp(6) without time zone
);


ALTER TABLE public.role OWNER TO dbuser;

--
-- Name: role_id_seq; Type: SEQUENCE; Schema: public; Owner: dbuser
--

ALTER TABLE public.role ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.role_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: transaction; Type: TABLE; Schema: public; Owner: dbuser
--

CREATE TABLE public.transaction (
    id bigint NOT NULL,
    amount double precision,
    currency character varying(255),
    date timestamp(6) without time zone,
    description character varying(255),
    external boolean NOT NULL,
    external_iban character varying(255),
    type character varying(255),
    update_date timestamp(6) without time zone,
    bank_account_id bigint,
    operation_id bigint,
    CONSTRAINT transaction_currency_check CHECK (((currency)::text = ANY ((ARRAY['EUR'::character varying, 'USD'::character varying])::text[]))),
    CONSTRAINT transaction_type_check CHECK (((type)::text = ANY ((ARRAY['DEPOSIT'::character varying, 'WITHDRAWAL'::character varying, 'FEE'::character varying, 'INTEREST'::character varying, 'DEBIT'::character varying, 'CREDIT'::character varying])::text[])))
);


ALTER TABLE public.transaction OWNER TO dbuser;

--
-- Name: transaction_id_seq; Type: SEQUENCE; Schema: public; Owner: dbuser
--

ALTER TABLE public.transaction ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.transaction_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: user_bank_account_assoc; Type: TABLE; Schema: public; Owner: dbuser
--

CREATE TABLE public.user_bank_account_assoc (
    user_id bigint NOT NULL,
    bank_account_id bigint NOT NULL
);


ALTER TABLE public.user_bank_account_assoc OWNER TO dbuser;

--
-- Name: user_role_assoc; Type: TABLE; Schema: public; Owner: dbuser
--

CREATE TABLE public.user_role_assoc (
    user_id bigint NOT NULL,
    role_id bigint NOT NULL
);


ALTER TABLE public.user_role_assoc OWNER TO dbuser;

--
-- Data for Name: app_user; Type: TABLE DATA; Schema: public; Owner: dbuser
--

COPY public.app_user (id, address, creation_date, non_expired, non_locked, enabled, password, update_date, user_name, f_action_count) FROM stdin;
1	22 rue de france 2489	2024-07-16 17:23:10.5217	t	t	t	$2a$10$ga.wqVYJLgXNCDtzQtC.aOOTbZi2JVdmWwzrEcEl3iduNlQUuY4Ei	2024-07-16 17:23:10.5217	paul	0
2	22  rue prince henri L-4563 	2024-07-18 21:50:08.410944	t	t	t	$2a$10$WlN3uEip4d6VsSxGyg7Lf.1D8FmNVsRKNEwdEt9XBZTjxwv1i5kVq	2024-07-18 21:50:08.410944	joe	0
3	new address	2024-07-18 22:07:19.193483	t	f	t	$2a$10$zeLm9mxqq5xe.OfI/aq9N.fkJGU7Sb04/m9fWvh2/J6qRZzdvwYsS	2024-07-19 16:11:55.34537	jack	6
\.


--
-- Data for Name: balance; Type: TABLE DATA; Schema: public; Owner: dbuser
--

COPY public.balance (id, amount, currency, date, type, update_date, bank_account_id) FROM stdin;
8	30	EUR	2024-07-18 18:03:21.010881	AVAILABLE	2024-07-18 18:03:21.010881	8
9	0	USD	2024-07-18 21:51:13.443272	AVAILABLE	2024-07-18 21:51:13.443272	9
10	40000	USD	2024-07-18 21:51:41.193299	AVAILABLE	2024-07-18 21:51:41.193299	9
18	33896	USD	2024-07-18 22:01:14.408943	AVAILABLE	2024-07-18 22:01:14.409488	9
19	5630	EUR	2024-07-18 22:01:14.430154	AVAILABLE	2024-07-18 22:01:14.430154	8
20	0	EUR	2024-07-18 22:08:20.620622	AVAILABLE	2024-07-18 22:08:20.620622	10
21	2000	EUR	2024-07-18 22:08:47.34942	AVAILABLE	2024-07-18 22:08:47.349955	10
22	28991	USD	2024-07-18 22:10:55.427569	AVAILABLE	2024-07-18 22:10:55.427569	9
23	6500	EUR	2024-07-18 22:10:55.434691	AVAILABLE	2024-07-18 22:10:55.434691	10
26	28936.5	USD	2024-07-19 02:00:36.015537	AVAILABLE	2024-07-19 02:00:36.015537	9
27	5680	EUR	2024-07-19 02:00:36.021335	AVAILABLE	2024-07-19 02:00:36.021335	8
\.


--
-- Data for Name: bank_account; Type: TABLE DATA; Schema: public; Owner: dbuser
--

COPY public.bank_account (id, account_name, balance_amount, creation_date, currency, iban_number, status, update_date) FROM stdin;
10	Main account	6500	2024-07-18 22:08:20.601157	EUR	LU194569129691978068	ACTIVE	2024-07-18 22:10:55.439508
9	Main account	28936.5	2024-07-18 21:51:13.434623	USD	LU634566868480154061	ACTIVE	2024-07-19 02:00:36.034112
8	Main account 	5680	2024-07-16 22:26:31.748445	EUR	LU354567015480904809	ACTIVE	2024-07-19 02:00:36.042707
\.


--
-- Data for Name: forbidden_account; Type: TABLE DATA; Schema: public; Owner: dbuser
--

COPY public.forbidden_account (iban) FROM stdin;
LU280019400644750000
LU120010001234567891
\.


--
-- Data for Name: payment; Type: TABLE DATA; Schema: public; Owner: dbuser
--

COPY public.payment (id, amount, beneficiary_account_number, beneficiary_name, communication, creation_date, currency, excution_status, update_date, bank_account_id) FROM stdin;
13	50	LU890030461357590000	Andrew	Food	2024-07-18 18:03:20.959658	EUR	t	2024-07-18 18:03:20.959658	8
21	5600	LU354567015480904809	Paul	July Salary	2024-07-18 22:01:14.357392	EUR	t	2024-07-18 22:01:14.357392	9
22	4500	LU194569129691978068	jack	August salary	2024-07-18 22:10:55.420657	EUR	t	2024-07-18 22:10:55.420657	9
23	5600	LU354567015480904809	Paul	August Salary	2024-06-18 22:01:14.357	EUR	t	2024-07-18 22:01:14.357392	9
24	5600	LU354567015480904809	Paul	August Salary	2024-06-18 22:01:14.357	EUR	t	2024-07-18 22:01:14.357392	8
25	50	LU354567015480904809	Worker	tips	2024-07-19 01:47:43.420126	EUR	t	2024-07-19 02:00:36.040547	9
\.


--
-- Data for Name: role; Type: TABLE DATA; Schema: public; Owner: dbuser
--

COPY public.role (id, alias, creation_date, description, update_date) FROM stdin;
1	USER	2024-07-15 14:41:21.317	Normal api user	2024-07-15 14:41:26.596
\.


--
-- Data for Name: transaction; Type: TABLE DATA; Schema: public; Owner: dbuser
--

COPY public.transaction (id, amount, currency, date, description, external, external_iban, type, update_date, bank_account_id, operation_id) FROM stdin;
17	50	EUR	2024-07-18 18:03:20.988654	Food	f	\N	DEBIT	2024-07-18 18:03:20.988654	8	13
18	50	EUR	2024-07-18 18:03:21.018091	Food	t	LU890030461357590000	CREDIT	2024-07-18 18:03:21.018329	\N	13
33	6104	USD	2024-07-18 22:01:14.401116	July Salary	f	\N	DEBIT	2024-07-18 22:01:14.401116	9	21
34	5600	EUR	2024-07-18 22:01:14.425541	July Salary	f	\N	CREDIT	2024-07-18 22:01:14.425541	8	21
35	4905	USD	2024-07-18 22:10:55.423318	August salary	f	\N	DEBIT	2024-07-18 22:10:55.423318	9	22
36	4500	EUR	2024-07-18 22:10:55.431011	August salary	f	\N	CREDIT	2024-07-18 22:10:55.431011	10	22
39	54.50000000000001	USD	2024-07-19 02:00:35.988605	tips	f	\N	DEBIT	2024-07-19 02:00:35.988605	9	25
40	50	EUR	2024-07-19 02:00:36.01922	tips	f	\N	CREDIT	2024-07-19 02:00:36.01922	8	25
\.


--
-- Data for Name: user_bank_account_assoc; Type: TABLE DATA; Schema: public; Owner: dbuser
--

COPY public.user_bank_account_assoc (user_id, bank_account_id) FROM stdin;
1	8
2	9
3	10
\.


--
-- Data for Name: user_role_assoc; Type: TABLE DATA; Schema: public; Owner: dbuser
--

COPY public.user_role_assoc (user_id, role_id) FROM stdin;
1	1
2	1
3	1
\.


--
-- Name: app_user_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dbuser
--

SELECT pg_catalog.setval('public.app_user_id_seq', 3, true);


--
-- Name: balance_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dbuser
--

SELECT pg_catalog.setval('public.balance_id_seq', 27, true);


--
-- Name: bank_account_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dbuser
--

SELECT pg_catalog.setval('public.bank_account_id_seq', 10, true);


--
-- Name: payment_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dbuser
--

SELECT pg_catalog.setval('public.payment_id_seq', 26, true);


--
-- Name: role_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dbuser
--

SELECT pg_catalog.setval('public.role_id_seq', 1, true);


--
-- Name: transaction_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dbuser
--

SELECT pg_catalog.setval('public.transaction_id_seq', 40, true);


--
-- Name: app_user app_user_pkey; Type: CONSTRAINT; Schema: public; Owner: dbuser
--

ALTER TABLE ONLY public.app_user
    ADD CONSTRAINT app_user_pkey PRIMARY KEY (id);


--
-- Name: balance balance_pkey; Type: CONSTRAINT; Schema: public; Owner: dbuser
--

ALTER TABLE ONLY public.balance
    ADD CONSTRAINT balance_pkey PRIMARY KEY (id);


--
-- Name: bank_account bank_account_pkey; Type: CONSTRAINT; Schema: public; Owner: dbuser
--

ALTER TABLE ONLY public.bank_account
    ADD CONSTRAINT bank_account_pkey PRIMARY KEY (id);


--
-- Name: forbidden_account forbidden_account_pkey; Type: CONSTRAINT; Schema: public; Owner: dbuser
--

ALTER TABLE ONLY public.forbidden_account
    ADD CONSTRAINT forbidden_account_pkey PRIMARY KEY (iban);


--
-- Name: payment payment_pkey; Type: CONSTRAINT; Schema: public; Owner: dbuser
--

ALTER TABLE ONLY public.payment
    ADD CONSTRAINT payment_pkey PRIMARY KEY (id);


--
-- Name: role role_pkey; Type: CONSTRAINT; Schema: public; Owner: dbuser
--

ALTER TABLE ONLY public.role
    ADD CONSTRAINT role_pkey PRIMARY KEY (id);


--
-- Name: transaction transaction_pkey; Type: CONSTRAINT; Schema: public; Owner: dbuser
--

ALTER TABLE ONLY public.transaction
    ADD CONSTRAINT transaction_pkey PRIMARY KEY (id);


--
-- Name: bank_account uk2dcv9y1lsqovowm4qtjq54lmm; Type: CONSTRAINT; Schema: public; Owner: dbuser
--

ALTER TABLE ONLY public.bank_account
    ADD CONSTRAINT uk2dcv9y1lsqovowm4qtjq54lmm UNIQUE (iban_number);


--
-- Name: app_user ukcpt2jpnop7mcpds1sv2i5629w; Type: CONSTRAINT; Schema: public; Owner: dbuser
--

ALTER TABLE ONLY public.app_user
    ADD CONSTRAINT ukcpt2jpnop7mcpds1sv2i5629w UNIQUE (user_name);


--
-- Name: role ukq9r35ho39149wlm2uxiib7v19; Type: CONSTRAINT; Schema: public; Owner: dbuser
--

ALTER TABLE ONLY public.role
    ADD CONSTRAINT ukq9r35ho39149wlm2uxiib7v19 UNIQUE (alias);


--
-- Name: user_bank_account_assoc user_bank_account_assoc_pkey; Type: CONSTRAINT; Schema: public; Owner: dbuser
--

ALTER TABLE ONLY public.user_bank_account_assoc
    ADD CONSTRAINT user_bank_account_assoc_pkey PRIMARY KEY (user_id, bank_account_id);


--
-- Name: user_role_assoc user_role_assoc_pkey; Type: CONSTRAINT; Schema: public; Owner: dbuser
--

ALTER TABLE ONLY public.user_role_assoc
    ADD CONSTRAINT user_role_assoc_pkey PRIMARY KEY (user_id, role_id);


--
-- Name: user_role_assoc fk1432w8wyfpm7hfm8umglbhvg3; Type: FK CONSTRAINT; Schema: public; Owner: dbuser
--

ALTER TABLE ONLY public.user_role_assoc
    ADD CONSTRAINT fk1432w8wyfpm7hfm8umglbhvg3 FOREIGN KEY (user_id) REFERENCES public.app_user(id);


--
-- Name: user_bank_account_assoc fk37mbmkhd8yvsk2x4rjdfp93kw; Type: FK CONSTRAINT; Schema: public; Owner: dbuser
--

ALTER TABLE ONLY public.user_bank_account_assoc
    ADD CONSTRAINT fk37mbmkhd8yvsk2x4rjdfp93kw FOREIGN KEY (bank_account_id) REFERENCES public.bank_account(id);


--
-- Name: user_role_assoc fk7gvxotiqnw7gwnfe2h2nld3je; Type: FK CONSTRAINT; Schema: public; Owner: dbuser
--

ALTER TABLE ONLY public.user_role_assoc
    ADD CONSTRAINT fk7gvxotiqnw7gwnfe2h2nld3je FOREIGN KEY (role_id) REFERENCES public.role(id);


--
-- Name: transaction fkcytrjmr1s508ehmuqo0f44yiw; Type: FK CONSTRAINT; Schema: public; Owner: dbuser
--

ALTER TABLE ONLY public.transaction
    ADD CONSTRAINT fkcytrjmr1s508ehmuqo0f44yiw FOREIGN KEY (operation_id) REFERENCES public.payment(id);


--
-- Name: payment fke12wsjq2ebylksh1vppycoa6h; Type: FK CONSTRAINT; Schema: public; Owner: dbuser
--

ALTER TABLE ONLY public.payment
    ADD CONSTRAINT fke12wsjq2ebylksh1vppycoa6h FOREIGN KEY (bank_account_id) REFERENCES public.bank_account(id);


--
-- Name: transaction fkec44dj1u86xnsku7ld84pirje; Type: FK CONSTRAINT; Schema: public; Owner: dbuser
--

ALTER TABLE ONLY public.transaction
    ADD CONSTRAINT fkec44dj1u86xnsku7ld84pirje FOREIGN KEY (bank_account_id) REFERENCES public.bank_account(id);


--
-- Name: user_bank_account_assoc fkelqedg5ruw7swb0pnobae204n; Type: FK CONSTRAINT; Schema: public; Owner: dbuser
--

ALTER TABLE ONLY public.user_bank_account_assoc
    ADD CONSTRAINT fkelqedg5ruw7swb0pnobae204n FOREIGN KEY (user_id) REFERENCES public.app_user(id);


--
-- Name: balance fkhorfn4vqd7uso761m0b2pa75m; Type: FK CONSTRAINT; Schema: public; Owner: dbuser
--

ALTER TABLE ONLY public.balance
    ADD CONSTRAINT fkhorfn4vqd7uso761m0b2pa75m FOREIGN KEY (bank_account_id) REFERENCES public.bank_account(id);


--
-- PostgreSQL database dump complete
--

